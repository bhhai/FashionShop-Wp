"use strict";(self.webpackChunkMailPoet3=self.webpackChunkMailPoet3||[]).push([[571],{24773:function(e,t,n){var a={};n.r(a),n.d(a,{loadSettings:function(){return A},openWoocommerceCustomizer:function(){return L},recalculateSubscribersScore:function(){return C},reinstall:function(){return T},saveSettings:function(){return N},sendCongratulatoryMssEmail:function(){return v},sendTestEmail:function(){return M},setErrorFlag:function(){return I},setReEngagement:function(){return S},setSetting:function(){return y},setSettings:function(){return k},updateKeyActivationState:function(){return b},verifyMssKey:function(){return h},verifyPremiumKey:function(){return f}});var r={};n.r(r),n.d(r,{getAmazonSesOptions:function(){return Y},getDefaultSegments:function(){return W},getKeyActivationState:function(){return H},getPages:function(){return $},getPaths:function(){return j},getReEngagementAction:function(){return te},getSavingError:function(){return O},getSegments:function(){return B},getSendGridOptions:function(){return X},getSetting:function(){return P},getSettings:function(){return Z},getTestEmailState:function(){return Q},getWebHosts:function(){return J},hasErrorFlag:function(){return R},hasMembersPlugin:function(){return G},hasReEngagementNotice:function(){return ee},hasSavingError:function(){return U},hasWooCommerce:function(){return z},isBuiltInCaptchaSupported:function(){return K},isMssActive:function(){return q},isNewUser:function(){return x},isSaving:function(){return V}});var l={};n.r(l),n.d(l,{CALL_API:function(){return ne.Z},TRACK_REINSTALLED:function(){return re},TRACK_SETTINGS_SAVED:function(){return ae},TRACK_TEST_EMAIL_SENT:function(){return le},TRACK_UNAUTHORIZED_EMAIL:function(){return ie}});var i=n(45993),s=n.n(i),o=(n(7295),n(97846)),c=n.n(o),m=n(71304),u=n(61299),p=n(76867);let d,E,g,_;function b(e){return{type:"UPDATE_KEY_ACTIVATION_STATE",fields:e}}function*h(e){const{success:t,error:n,res:a}=yield{type:"CALL_API",endpoint:"services",action:"checkMSSKey",data:{key:e}};if(!t)return b({mssStatus:E.INVALID,mssMessage:n.join(" ")||null});const r={mssMessage:a.data.message||null},l=(0,u.Ys)(ge).getSettings();l.mta_group="mailpoet",l.mta={...l.mta,method:"MailPoet",mailpoet_api_key:e},l.signup_confirmation.enabled="1";const i=yield{type:"CALL_API",endpoint:"settings",action:"set",data:l};return i.success?(yield k(i.res.data),r.mssStatus=E.VALID_MSS_ACTIVE):r.mssStatus=E.VALID_MSS_NOT_ACTIVE,b(r)}function*f(e){var t,n,a;const{res:r,success:l,error:i}=yield{type:"CALL_API",endpoint:"services",action:"checkPremiumKey",data:{key:e}};var s;if(!l)return p.Z.trackEvent("User has failed to validate a Premium key",{"Premium plugin is active":!!p.Z.premiumVersion}),b({premiumStatus:d.INVALID,premiumMessage:i.join(" ")||null,code:null==r||null===(s=r.meta)||void 0===s?void 0:s.code});yield y(["premium","premium_key"],e);const o=r.meta.premium_plugin_active;let c=r.meta.premium_plugin_installed?d.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:d.VALID_PREMIUM_PLUGIN_NOT_INSTALLED;return o&&(c=d.VALID_PREMIUM_PLUGIN_ACTIVE),yield b({premiumMessage:null,premiumStatus:c,code:null==r||null===(t=r.meta)||void 0===t?void 0:t.code,downloadUrl:null==r||null===(n=r.meta)||void 0===n||null===(a=n.premium_plugin_info)||void 0===a?void 0:a.download_link}),p.Z.trackEvent("User has validated a Premium key"),null}function*v(){const e=yield{type:"CALL_API",endpoint:"services",action:"sendCongratulatoryMssEmail"};return e&&e.success?b({congratulatoryMssEmailSentTo:e.res.data.email_address}):null}function y(e,t){return{type:"SET_SETTING",path:e,value:t}}function k(e){return{type:"SET_SETTINGS",value:e}}function I(e){return{type:"SET_ERROR_FLAG",value:e}}function S(e){return{type:"SET_RE_ENGAGEMENT_NOTICE",value:e}}function*N(){yield{type:"SAVE_STARTED"};const e=(0,u.Ys)(ge).getSettings(),t=JSON.stringify(e),n=JSON.parse(t,((e,t)=>"string"==typeof t?t.trim():t)),{success:a,error:r,res:l}=yield{type:"CALL_API",endpoint:"settings",action:"set",data:n};return a?(yield{type:"TRACK_SETTINGS_SAVED"},yield b({congratulatoryMssEmailSentTo:null,fromAddressModalCanBeShown:!1}),yield k(l.data),yield S(l.meta),yield{type:"TRACK_UNAUTHORIZED_EMAIL",meta:l.meta},{type:"SAVE_DONE"}):{type:"SAVE_FAILED",error:r}}function*A(){const{success:e,error:t,res:n}=yield{type:"CALL_API",endpoint:"settings",action:"get"};return e?k(n.data):{type:"SAVE_FAILED",error:t}}function*T(){p.Z.Modal.loading(!0);const{success:e,error:t}=yield{type:"CALL_API",endpoint:"setup",action:"reset"};return p.Z.Modal.loading(!1),e?(yield{type:"TRACK_REINSTALLED"},{type:"SAVE_DONE"}):{type:"SAVE_FAILED",error:t}}function*C(){return p.Z.Modal.loading(!0),yield{type:"CALL_API",endpoint:"settings",action:"recalculateSubscribersScore"},p.Z.Modal.loading(!1),{type:"SAVE_DONE"}}!function(e){e[e.INVALID=0]="INVALID",e[e.VALID_PREMIUM_PLUGIN_NOT_INSTALLED=1]="VALID_PREMIUM_PLUGIN_NOT_INSTALLED",e[e.VALID_PREMIUM_PLUGIN_NOT_ACTIVE=2]="VALID_PREMIUM_PLUGIN_NOT_ACTIVE",e[e.VALID_PREMIUM_PLUGIN_ACTIVE=3]="VALID_PREMIUM_PLUGIN_ACTIVE",e[e.VALID_PREMIUM_PLUGIN_BEING_INSTALLED=4]="VALID_PREMIUM_PLUGIN_BEING_INSTALLED",e[e.VALID_PREMIUM_PLUGIN_BEING_ACTIVATED=5]="VALID_PREMIUM_PLUGIN_BEING_ACTIVATED"}(d||(d={})),function(e){e[e.INVALID=0]="INVALID",e[e.VALID_MSS_NOT_ACTIVE=1]="VALID_MSS_NOT_ACTIVE",e[e.VALID_MSS_ACTIVE=2]="VALID_MSS_ACTIVE"}(E||(E={})),function(e){e[e.INSTALL_INSTALLING=0]="INSTALL_INSTALLING",e[e.INSTALL_ACTIVATING=1]="INSTALL_ACTIVATING",e[e.INSTALL_DONE=2]="INSTALL_DONE",e[e.INSTALL_INSTALLING_ERROR=3]="INSTALL_INSTALLING_ERROR",e[e.INSTALL_ACTIVATING_ERROR=4]="INSTALL_ACTIVATING_ERROR",e[e.ACTIVATE_ACTIVATING=5]="ACTIVATE_ACTIVATING",e[e.ACTIVATE_DONE=6]="ACTIVATE_DONE",e[e.ACTIVATE_ERROR=7]="ACTIVATE_ERROR"}(g||(g={})),function(e){e[e.SENDING=0]="SENDING",e[e.NONE=1]="NONE",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(_||(_={}));var w=n(68041);function*M(e,t){if(!e)return{type:"TEST_EMAIL_FAILED",error:[(0,w.t)("cantSendEmail")]};yield{type:"START_TEST_EMAIL_SENDING"};const n=yield{type:"CALL_API",endpoint:"mailer",action:"send",data:{mailer:t,newsletter:{subject:(0,w.t)("testEmailSubject"),body:{html:`<p>${(0,w.t)("testEmailBody")}</p>`,text:(0,w.t)("testEmailBody")}},subscriber:e}};return yield{type:"TRACK_TEST_EMAIL_SENT",success:n.success,method:t.method},n.success?{type:"TEST_EMAIL_SUCCESS"}:{type:"TEST_EMAIL_FAILED",error:n.error}}function*L(e){let t=e;if(!t){const{res:e,success:n,error:a}=yield{type:"CALL_API",endpoint:"settings",action:"set",data:{"woocommerce.use_mailpoet_editor":1}};if(!n)return{type:"SAVE_FAILED",error:a};t=e.data.woocommerce.transactional_email_id}return window.location.href=`?page=mailpoet-newsletter-editor&id=${t}`,null}var F=n(96486),D=n.n(F);function P(e,t){return D().get(e.data,t)}function Z(e){return e.data}function V(e){return e.save.inProgress}function R(e){return e.flags.error}function U(e){return null!==e.save.error}function O(e){return e.save.error}function z(e){return e.flags.woocommerce}function G(e){return e.flags.membersPlugin}function K(e){return e.flags.builtInCaptcha}function x(e){return e.flags.newUser}function q(e){return"MailPoet"===D().get(e,"data.mta.method")}function B(e){return e.segments}function W(e){return e.segments.filter((e=>"default"===e.type))}function $(e){return e.pages}function H(e){return e.keyActivation}function j(e){return e.paths}function J(e){return{...e.hosts.web,manual:{name:(0,w.t)("notListed"),emails:25,interval:5}}}function Y(e){return e.hosts.smtp.AmazonSES}function X(e){return e.hosts.smtp.SendGrid}function Q(e){return e.testEmail}function ee(e){return e.reEngagement.showNotice}function te(e){return e.reEngagement.action}var ne=n(25643);function ae(){const e=(0,u.Ys)(ge).getSettings(),t={"Sending method type":e.mta_group||null,"Sending frequency (emails)":"mailpoet"!==e.mta_group&&e.mta&&e.mta.frequency&&e.mta.frequency.emails,"Sending frequency (interval)":"mailpoet"!==e.mta_group&&e.mta&&e.mta.frequency&&e.mta.frequency.interval,"Sending provider":"smtp"===e.mta_group&&e.smtp_provider,"Sign-up confirmation enabled":e.signup_confirmation&&e.signup_confirmation.enabled,"Bounce email is present":e.bounce&&""!==e.bounce.address,"Newsletter task scheduler method":e.cron_trigger&&e.cron_trigger.method};p.Z.isWoocommerceActive&&(t["WooCommerce email customizer enabled"]=e.woocommerce&&e.woocommerce.use_mailpoet_editor),p.Z.trackEvent("User has saved Settings",t)}function re(){p.Z.trackEvent("User has reinstalled MailPoet via Settings")}function le({success:e,method:t}){p.Z.trackEvent("User has sent a test email from Settings",{"Sending was successful":!!e,"Sending method type":t})}function ie({meta:e}){void 0!==e&&e.invalid_sender_address&&p.Z.trackEvent("Unauthorized email used",{"Unauthorized email source":"settings"})}function se(e){return t=>void 0===t?e:t?`${t}`:""}function oe(e,t,n){return a=>void 0===a?n:a===e||a===t?a:a?e:t}function ce(e,t){return n=>e.includes(n)?n:t}function me(e){return t=>Object.keys(e).reduce(((n,a)=>({[a]:e[a](t?t[a]:void 0),...n})),{})}function ue(e){return e}function pe(e){const t=se(""),n=oe("1","0","0"),a=oe("1","0","1"),r=oe("1","",""),l=oe("1","","1"),i=(s=[],e=>D().isArray(e)?e.map(se("")):s);var s;const o=ce(["server","manual","AmazonSES","SendGrid"],"server");return me({sender:me({name:t,address:t}),reply_to:me({name:t,address:t}),bounce:me({address:t}),subscribe:me({on_comment:me({enabled:n,label:se((0,w.t)("yesAddMe")),segments:i}),on_register:me({enabled:n,label:se((0,w.t)("yesAddMe")),segments:i})}),subscription:me({pages:me({manage:t,unsubscribe:t,confirmation:t,captcha:t,confirm_unsubscribe:t}),segments:i}),stats_notifications:me({enabled:a,automated:a,address:t}),subscriber_email_notification:me({enabled:l,address:t}),reEngagement:me({page:t}),cron_trigger:me({method:ce(["WordPress","MailPoet","Linux Cron"],"WordPress")}),tracking:me({level:ce(["full","partial","basic"],"full")}),send_transactional_emails:r,deactivate_subscriber_after_inactive_days:ce(["","90","180","365"],"180"),analytics:me({enabled:r}),"3rd_party_libs":me({enabled:r}),captcha:me({type:ce(["","built-in","recaptcha"],"built-in"),recaptcha_site_token:t,recaptcha_secret_token:t}),logging:ce(["everything","errors","nothing"],"errors"),mta_group:ce(["mailpoet","website","smtp"],"website"),mta:me({method:ce(["MailPoet","AmazonSES","SendGrid","PHPMail","SMTP"],"PHPMail"),frequency:me({emails:se("25"),interval:se("5")}),mailpoet_api_key:t,host:t,port:t,region:se("us-east-1"),access_key:t,secret_key:t,api_key:t,login:t,password:t,encryption:t,authentication:ce(["1","-1"],"1"),mailpoet_api_key_state:me({state:ce(["valid","invalid","expiring","already_used","check_error"],"check_error"),data:ue})}),mailpoet_smtp_provider:o,smtp_provider:o,web_host:se("manual"),mailpoet_sending_frequency:ce(["auto","manual"],"manual"),signup_confirmation:me({enabled:l,subject:t,body:t}),woocommerce:me({use_mailpoet_editor:r,transactional_email_id:t,optin_on_checkout:me({enabled:l,segments:i,message:t}),accept_cookie_revenue_tracking:me({set:l})}),mailpoet_subscribe_old_woocommerce_customers:me({enabled:l}),premium:me({premium_key:t,premium_key_state:me({state:ce(["valid","invalid","expiring","already_used","check_error"],"check_error"),data:ue})}),authorized_emails_addresses_check:ue})(e)}function de(e){let t;return(n=e,a)=>{switch(a.type){case"SET_SETTING":return(0,F.setWith)((0,F.clone)(n),["data",...a.path],a.value,F.clone);case"SET_SETTINGS":return{...n,data:pe(a.value)};case"SET_ERROR_FLAG":return{...n,flags:{...n.flags,error:!!a.value}};case"SAVE_STARTED":return{...n,save:{inProgress:!0,error:null}};case"SAVE_DONE":return{...n,save:{inProgress:!1,error:null}};case"SAVE_FAILED":return{...n,save:{inProgress:!1,error:a.error}};case"SET_RE_ENGAGEMENT_NOTICE":return{...n,reEngagement:{showNotice:a.value.showNotice,action:a.value.action}};case"UPDATE_KEY_ACTIVATION_STATE":return t={...n.keyActivation,...a.fields},t.isKeyValid=null,null!==t.mssStatus&&null!==t.premiumStatus&&(t.isKeyValid=t.mssStatus!==E.INVALID||t.premiumStatus!==d.INVALID),{...n,keyActivation:t};case"START_TEST_EMAIL_SENDING":return{...n,testEmail:{state:_.SENDING,error:null}};case"TEST_EMAIL_SUCCESS":return{...n,testEmail:{state:_.SUCCESS,error:null}};case"TEST_EMAIL_FAILED":return{...n,testEmail:{state:_.FAILURE,error:a.error}};default:return n}}}function Ee(e){const t=e.mailpoet_pages,n=e.mailpoet_paths,a=e.mailpoet_segments,r=e.mailpoet_hosts,l=pe(e.mailpoet_settings),i={error:!1,newUser:!!e.mailpoet_is_new_user,woocommerce:!!e.mailpoet_woocommerce_active,membersPlugin:!!e.mailpoet_members_plugin_active,builtInCaptcha:e.mailpoet_built_in_captcha_supported};let s=null,o=null,c=null;return(l.premium.premium_key||l.mta.mailpoet_api_key)&&(o=function(e,t){return e?"MailPoet"===t.mta.method?E.VALID_MSS_ACTIVE:E.VALID_MSS_NOT_ACTIVE:E.INVALID}(e.mailpoet_mss_key_valid,l),c=function(e,t){const n=!!p.Z.premiumVersion;return e?n?d.VALID_PREMIUM_PLUGIN_ACTIVE:t?d.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:d.VALID_PREMIUM_PLUGIN_NOT_INSTALLED:d.INVALID}(e.mailpoet_premium_key_valid,e.mailpoet_premium_plugin_installed),s=o!==E.INVALID||c!==d.INVALID),{data:l,flags:i,save:{inProgress:!1,error:null},keyActivation:{isKeyValid:s,mssStatus:o,premiumStatus:c,mssMessage:null,premiumMessage:null,fromAddressModalCanBeShown:!1,premiumInstallationStatus:null,key:l.premium.premium_key||l.mta.mailpoet_api_key,inProgress:!1,congratulatoryMssEmailSentTo:null,downloadUrl:e.mailpoet_premium_plugin_download_url,activationUrl:e.mailpoet_premium_plugin_activation_url},segments:a,pages:t,paths:n,hosts:r,testEmail:{state:_.NONE,error:null},reEngagement:{showNotice:!1,action:null}}}const ge="mailpoet-settings";var _e=n(93726),be=n(5830),he=n(48228),fe=n(53681),ve=n(99181),ye=({title:e,description:t,htmlFor:n})=>s().createElement("div",{className:"mailpoet-settings-label"},s().createElement("label",{className:"mailpoet-settings-label-title",htmlFor:n},e),t&&s().createElement("p",{className:"description"},t)),ke=({children:e})=>s().createElement("div",{className:"mailpoet-settings-inputs"},e),Ie=n(57744),Se=n(41882);function Ne(e){return(0,Se.Z)(ge)[e]}var Ae=n(94878);function Te(e,t=[]){return(0,Ae.Z)((t=>{const n=t(ge);return n[e].bind(n)}),t)}function Ce(...e){const t=Te("getSetting"),n=Ne("setSetting");return[t(e),s().useCallback((t=>n(e,t)),e)]}var we=n(27927),Me=n.n(we),Le=()=>{const[e,t]=s().useState(!1),n=Te("isSaving")(),a=Te("hasErrorFlag")(),r=Te("getSavingError")(),l=Te("hasReEngagementNotice")(),i=Te("getReEngagementAction")(),o=Ne("saveSettings"),{notices:c}=s().useContext(m.k),u=c.error,d=c.success;return s().useEffect((()=>{e&&!n&&(r?u(r.map((e=>s().createElement("p",null,e))),{scroll:!0}):(d(s().createElement("p",null,p.Z.I18n.t("settingsSaved")),{scroll:!0}),l&&((e,t,n)=>{if("deactivate"!==e){if("reactivate"===e){const e=Me()(p.Z.I18n.t("re-engagementReactivatedNotice"),/\[link\](.*?)\[\/link\]/g,(e=>s().createElement("a",{key:"reEngagementEmailsTabLink",href:"?page=mailpoet-newsletters#/re_engagement",rel:"noopener noreferrer"},e)));n(s().createElement("p",null,e),{scroll:!0})}}else t(s().createElement("p",null,p.Z.I18n.t("re-engagementDisabledNotice")),{scroll:!0})})(i,u,d)))}),[e,r,n,u,d,l,i]),s().createElement("div",{className:"mailpoet-settings-save"},s().createElement(Ie.Z,{type:"button",automationId:"settings-submit-button",isDisabled:n||a,onClick:()=>{t(!0),o()}},p.Z.I18n.t("saveSettings")))},Fe=n(14772),De=e=>{const t=Te(e.segmentsSelector?e.segmentsSelector:"getDefaultSegments")().map((e=>({value:e.id,label:e.name,count:e.subscribers}))),n=t.filter((t=>e.value.includes(t.value)));return s().createElement(Fe.Z,{isMulti:!0,defaultValue:n,id:e.id,placeholder:e.placeholder,options:t,onChange:t=>{e.setValue((t||[]).map((e=>e.value)))}})},Pe=n(2141),Ze=e=>{const t=Te("getPages")();let n=t.find((t=>t.id===parseInt(e.value,10)));return n||(n=t[0]),s().createElement("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered"},s().createElement(Pe.Z,{id:e.id,automationId:e.automationId,value:n.id,onChange:(0,w.z2)(e.setValue),isMinWidth:!0,dimension:"small"},t.map((e=>s().createElement("option",{key:e.id,value:e.id},`${e.title}`)))),s().createElement("span",{className:"mailpoet-gap"}),s().createElement("a",{className:"mailpoet-link",target:"_blank",title:(0,w.t)("previewPage"),rel:"noopener noreferrer",href:n.url[e.preview],"data-automation-id":e.linkAutomationId},(0,w.t)("preview")))},Ve=n(60017),Re=n(43246);function Ue(){const e=Te("isMssActive")(),[t,n]=Ce("sender","name"),[a,r]=Ce("sender","address"),[l,i]=Ce("reply_to","name"),[o,c]=Ce("reply_to","address"),m=Ne("setErrorFlag"),u=a&&!(0,w.Jh)(a),p=o&&!(0,w.Jh)(o);return s().useEffect((()=>{m(u||p)}),[p,u,m]),s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("defaultSenderTitle"),description:(0,w.t)("defaultSenderDescription"),htmlFor:"sender-name"}),s().createElement(ke,null,s().createElement("label",{htmlFor:"sender-name"},(0,w.t)("from")),s().createElement("br",null),s().createElement(Ve.Z,{dimension:"small",type:"text",id:"sender-name",placeholder:(0,w.t)("yourName"),"data-automation-id":"from-name-field",value:t,onChange:(0,w.z2)(n)}),s().createElement("br",null),s().createElement(Ve.Z,{dimension:"small",type:"text",placeholder:"from@mydomain.com","data-automation-id":"from-email-field",value:a,onChange:(0,w.z2)((0,w.pz)(r))}),s().createElement("br",null),u&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,w.t)("invalidEmail")),s().createElement("div",{className:"regular-text"},s().createElement(Re.Z,{emailAddress:a,mssActive:e})),s().createElement("label",{className:"mailpoet-settings-inputs-row",htmlFor:"reply_to-name"},"Reply-to"),s().createElement(Ve.Z,{dimension:"small",type:"text",id:"reply_to-name",placeholder:(0,w.t)("yourName"),"data-automation-id":"reply_to-name-field",value:l,onChange:(0,w.z2)(i)}),s().createElement("br",null),s().createElement(Ve.Z,{dimension:"small",type:"text",placeholder:"reply_to@mydomain.com","data-automation-id":"reply_to-email-field",value:o,onChange:(0,w.z2)((0,w.pz)(c))}),s().createElement("br",null),p&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,w.t)("invalidEmail"))))}var Oe=n(45697),ze=n.n(Oe),Ge=n(89828);function Ke({title:e,description:t,event:n}){const[a,r]=Ce("subscribe",n,"enabled"),[l,i]=Ce("subscribe",n,"label"),[o,c]=Ce("subscribe",n,"segments");return s().useEffect((()=>{""===l&&i((0,w.t)("yesAddMe"))}),[l,i]),s().createElement(s().Fragment,null,s().createElement(ye,{title:e,description:t,htmlFor:`subscribe-${n}-enabled`}),s().createElement(ke,null,s().createElement(Ge.Z,{id:`subscribe-${n}-enabled`,automationId:`subscribe-${n}-checkbox`,checked:"1"===a,onCheck:e=>r(e?"1":"0")}),"1"===a&&s().createElement(s().Fragment,null,s().createElement("br",null),s().createElement(Ve.Z,{dimension:"small",type:"text",value:l,onChange:(0,w.z2)(i)}),s().createElement("label",{className:"mailpoet-settings-inputs-row",htmlFor:`subscribe-${n}-segments`},(0,w.t)("usersWillBeSubscribedTo")),s().createElement("div",{"data-automation-id":`subscribe-${n}-segments-selection`},s().createElement(De,{id:`subscribe-${n}-segments`,placeholder:(0,w.t)("chooseList"),value:o,setValue:c})))))}function xe(){const[e,t]=Ce("subscription","pages","manage"),[n,a]=Ce("subscription","segments");return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("manageSubTitle"),description:s().createElement(s().Fragment,null,(0,w.t)("manageSubDescription1")," ",Me()((0,w.t)("manageSubDescription2"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/222-customize-your-manage-subscription-page",rel:"noopener noreferrer","data-beacon-article":"59ddd0bb2c7d3a40f0ed5b57",target:"_blank"},e)))),htmlFor:"subscription-manage-page"}),s().createElement(ke,null,s().createElement(Ze,{value:e,preview:"manage",setValue:t,id:"subscription-manage-page",automationId:"subscription-manage-page-selection",linkAutomationId:"preview_manage_subscription_page_link"}),s().createElement("label",{className:"mailpoet-settings-inputs-row",htmlFor:"subscription-segments"},(0,w.t)("subscribersCanChooseFrom")),s().createElement(De,{id:"subscription-segments",value:n,setValue:a,placeholder:(0,w.t)("leaveEmptyToDisplayAll")})))}function qe(){const[e,t]=Ce("subscription","pages","unsubscribe"),[n,a]=Ce("subscription","pages","confirm_unsubscribe");return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("unsubscribeTitle"),description:s().createElement(s().Fragment,null,Me()((0,w.t)("unsubscribeDescription1"),"[mailpoet_page]",(()=>s().createElement("code",{key:"mp"},"[mailpoet_page]")))," ",Me()((0,w.t)("unsubscribeDescription2"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/221-customize-your-unsubscribe-page",rel:"noopener noreferrer","data-beacon-article":"59dcea10042863379ddc8b4d",target:"_blank"},e)))),htmlFor:"subscription-pages-unsubscribe"}),s().createElement(ke,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,w.t)("confirmationPageTitle"),":"),s().createElement(Ze,{value:n,preview:"confirm_unsubscribe",setValue:a,id:"subscription-pages-unsubscribe-confirmation",automationId:"unsubscribe-confirmation-page-selection",linkAutomationId:"unsubscribe_page_preview_link_confirmation"}),s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,w.t)("successPageTitle"),":"),s().createElement(Ze,{value:e,preview:"unsubscribe",setValue:t,id:"subscription-pages-unsubscribe",automationId:"unsubscribe-success-page-selection",linkAutomationId:"unsubscribe_page_preview_link"})))}function Be(){const[e,t]=Ce("stats_notifications","enabled"),[n,a]=Ce("stats_notifications","automated"),[r,l]=Ce("stats_notifications","address"),i=Ne("setErrorFlag"),o=("1"===e||"1"===n)&&""===r.trim(),c=r&&!(0,w.Jh)(r);return s().useEffect((()=>{i(o||c)}),[o,c,i]),s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("statsNotifsTitle"),description:(0,w.t)("statsNotifsDescription"),htmlFor:"stats-enabled"}),s().createElement(ke,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ge.Z,{id:"stats-enabled",checked:"1"===e,onCheck:e=>t(e?"1":"0")}),s().createElement("label",{htmlFor:"stats-enabled"},(0,w.t)("newslettersAndPostNotifs"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ge.Z,{id:"stats-automated",checked:"1"===n,onCheck:e=>a(e?"1":"0")}),s().createElement("label",{htmlFor:"stats-automated"},(0,w.t)("welcomeAndWcEmails"))),s().createElement(Ve.Z,{dimension:"small",type:"email",value:r,onChange:(0,w.z2)((0,w.pz)(l)),placeholder:"me@mydomain.com"}),o&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,w.t)("pleaseFillEmail")),c&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,w.t)("invalidEmail"))))}Ke.propTypes={title:ze().string.isRequired,description:ze().string.isRequired,event:ze().oneOf(["on_comment","on_register"]).isRequired};var We=n(84868);function $e(){const[e,t]=Ce("subscriber_email_notification","enabled"),[n,a]=Ce("subscriber_email_notification","address"),r=Ne("setErrorFlag"),l="1"===e&&""===n.trim(),i=n&&!(0,w.Jh)(n);return s().useEffect((()=>{r(l||i)}),[l,i,r]),s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("newSubscriberNotifsTitle"),description:(0,w.t)("newSubscriberNotifsDescription"),htmlFor:"subscriber_email_notification-enabled"}),s().createElement(ke,null,s().createElement(We.Z,{checked:"1"===e,value:"1",onCheck:t}),(0,w.t)("yes")," ",s().createElement(We.Z,{checked:""===e,value:"",onCheck:t}),(0,w.t)("no"),s().createElement("br",null),s().createElement(Ve.Z,{dimension:"small",type:"email",value:n,onChange:(0,w.z2)((0,w.pz)(a)),placeholder:"me@mydomain.com"}),l&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,w.t)("pleaseFillEmail")),i&&s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},(0,w.t)("invalidEmail"))))}function He({name:e,title:t,description:n}){const[a,r]=s().useState([]),l=`[${e}${a.length?` segments="${a.join(",")}"`:""}]`;return s().createElement(s().Fragment,null,s().createElement(ye,{title:t,description:n,htmlFor:`${e}-shortcode`}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",readOnly:!0,type:"text",value:l,onClick:e=>{e.target.focus(),e.target.select()},id:`${e}-shortcode`}),s().createElement("br",null),s().createElement(De,{value:a,setValue:r,id:`${e}-shortcode-segments`,placeholder:(0,w.t)("leaveEmptyToDisplayAll"),segmentsSelector:"getSegments"})))}function je(){return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("gdprTitle"),description:(0,w.t)("gdprDescription"),htmlFor:"gdpr-compliant"}),s().createElement(ke,null,s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/246-guide-to-conform-to-gdpr","data-beacon-article":"5a9e8cdd04286374f7089a8c",title:(0,w.t)("readGuide"),target:"_blank",rel:"noopener noreferrer"},(0,w.t)("readGuide"))))}function Je(){const[e,t]=Ce("reEngagement","page");return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("reEngagementTitle"),description:(0,w.t)("reEngagementDescription"),htmlFor:"re-engagement-page"}),s().createElement(ke,null,s().createElement(Ze,{value:e,preview:"re_engagement",setValue:t,id:"re-engagement-page"})))}function Ye(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(Ue,null),s().createElement(Ke,{event:"on_comment",title:(0,w.t)("subscribeInCommentsTitle"),description:(0,w.t)("subscribeInCommentsDescription")}),s().createElement(Ke,{event:"on_register",title:(0,w.t)("subscribeInRegistrationTitle"),description:(0,w.t)("subscribeInRegistrationDescription")}),s().createElement(xe,null),s().createElement(qe,null),s().createElement(Je,null),s().createElement(Be,null),s().createElement($e,null),s().createElement(He,{name:"mailpoet_archive",title:(0,w.t)("archiveShortcodeTitle"),description:(0,w.t)("archiveShortcodeDescription")}),s().createElement(He,{name:"mailpoet_subscribers_count",title:(0,w.t)("subscribersCountShortcodeTitle"),description:(0,w.t)("subscribersCountShortcodeDescription")}),s().createElement(je,null),s().createElement(Le,null))}function Xe(){const[e,t]=Ce("cron_trigger","method"),n=Te("getPaths")();return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("taskCron"),description:s().createElement(s().Fragment,null,(0,w.t)("taskCronDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/129-what-is-the-newsletter-task-scheduler","data-beacon-article":"57ce0a7a903360649f6e5703",rel:"noopener noreferrer",target:"_blank"},(0,w.t)("readMore"))),htmlFor:"cron_trigger-method"}),s().createElement(ke,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"cron_trigger-method-wordpress",value:"WordPress",checked:"WordPress"===e,onCheck:t,automationId:"wordress_cron_radio"}),s().createElement("label",{htmlFor:"cron_trigger-method-wordpress"},(0,w.t)("websiteVisitors"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"cron_trigger-method-mailpoet",value:"MailPoet",checked:"MailPoet"===e,onCheck:t,automationId:"mailpoet_cron_radio"}),s().createElement("label",{htmlFor:"cron_trigger-method-mailpoet"},Me()((0,w.t)("mailpoetScript"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/131-hosts-which-mailpoet-task-scheduler-wont-work","data-beacon-article":"57ce0b05c6979108399a0456",rel:"noopener noreferrer",target:"_blank"},e))))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"cron_trigger-method-cron",value:"Linux Cron",checked:"Linux Cron"===e,onCheck:t,automationId:"linux_cron_radio"}),s().createElement("label",{htmlFor:"cron_trigger-method-cron"},(0,w.t)("serverCron"))),"Linux Cron"===e&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,w.t)("addCommandToCrontab")),s().createElement(Ve.Z,{dimension:"small",type:"text",readOnly:!0,value:`php ${n.plugin}/mailpoet-cron.php ${n.root}`}),s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,w.t)("withFrequency")),s().createElement(Ve.Z,{dimension:"small",type:"text",readOnly:!0,value:"*/1 * * * *"}))))}function Qe(){const e=Te("hasMembersPlugin")();return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("rolesTitle"),description:(0,w.t)("rolesDescription"),htmlFor:""}),s().createElement(ke,null,s().createElement("p",null,e?s().createElement("a",{className:"mailpoet-link",href:"?page=roles"},(0,w.t)("manageUsingMembers")):Me()((0,w.t)("installMembers"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://wordpress.org/plugins/members/",rel:"noopener noreferrer",target:"_blank"},e))))))}function et(){const[e,t]=Ce("tracking","level");return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("engagementTrackingTitle"),description:(0,w.t)("engagementTrackingDescription"),htmlFor:"engagement_tracking"}),s().createElement(ke,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"tracking-basic",value:"basic",checked:"basic"===e,onCheck:t,automationId:"tracking-basic-radio"}),s().createElement("label",{htmlFor:"tracking-basic"},(0,w.t)("engagementTrackingBasic"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"tracking-partial",value:"partial",checked:"partial"===e,onCheck:t,automationId:"tracking-partial-radio"}),s().createElement("label",{htmlFor:"tracking-partial"},(0,w.t)("engagementTrackingPartial"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"tracking-full",value:"full",checked:"full"===e,onCheck:t,automationId:"tracking-full-radio"}),s().createElement("label",{htmlFor:"tracking-full"},(0,w.t)("engagementTrackingFull")))))}function tt(){const[e]=Ce("smtp_provider"),t=Te("isMssActive")(),[n,a]=Ce("send_transactional_emails");let r;return t?r="MailPoet Sending Service":"manual"===e?r="SMTP":"SendGrid"===e?r="SendGrid":"AmazonSES"===e?r="Amazon SES":"server"===e&&(r=(0,w.t)("hostOption")),s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("transactionalTitle"),description:s().createElement(s().Fragment,null,(0,w.t)("transactionalDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/292-choose-how-to-send-your-wordpress-websites-emails","data-beacon-article":"5ddbf92504286364bc9228c5",rel:"noopener noreferrer",target:"_blank"},(0,w.t)("transactionalLink"))),htmlFor:""}),s().createElement(ke,null,s().createElement(We.Z,{id:"transactional-enabled",value:"1",checked:"1"===n,onCheck:a}),s().createElement("label",{htmlFor:"transactional-enabled"},(0,w.t)("transactionalCurrentMethod").replace("%1$s",r),s().createElement("br",null),s().createElement("span",{className:"mailpoet-note"},Me()((0,w.t)("transactionalMssNote"),/\[link\](.*?)\[\/link\]/,(e=>s().createElement("a",{className:"mailpoet-link",key:e,href:"https://kb.mailpoet.com/article/292-choose-how-to-send-your-wordpress-websites-emails#attachments",rel:"noopener noreferrer","data-beacon-article":"5ddbf92504286364bc9228c5",target:"_blank"},e))))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"transactional-disabled",value:"",checked:""===n,onCheck:a}),s().createElement("label",{htmlFor:"transactional-disabled"},(0,w.t)("transactionalWP")))))}function nt(){const[e,t]=Ce("deactivate_subscriber_after_inactive_days"),[n]=Ce("tracking","level"),a="basic"!==n;return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("inactiveSubsTitle"),description:s().createElement(s().Fragment,null,(0,w.t)("inactiveSubsDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/264-inactive-subscribers","data-beacon-article":"5cbf19622c7d3a026fd3efe1",rel:"noopener noreferrer",target:"_blank"},(0,w.t)("readMore"))),htmlFor:""}),s().createElement(ke,null,!a&&s().createElement("p",{"data-automation-id":"inactive-subscribers-disabled"},(0,w.t)("disabledBecauseTrackingIs")),a&&s().createElement("div",{"data-automation-id":"inactive-subscribers-enabled"},s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"inactive-subscribers-disabled",automationId:"inactive-subscribers-option-never",value:"",checked:""===e,onCheck:t}),s().createElement("label",{htmlFor:"inactive-subscribers-disabled"},(0,w.t)("never"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"inactive-subscribers-3-months",value:"90",checked:"90"===e,onCheck:t}),s().createElement("label",{htmlFor:"inactive-subscribers-3-months"},(0,w.t)("after3months"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"inactive-subscribers-6-months",value:"180",checked:"180"===e,onCheck:t,automationId:"inactive-subscribers-default"}),s().createElement("label",{htmlFor:"inactive-subscribers-6-months"},(0,w.t)("after6months"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"inactive-subscribers-12-months",value:"365",checked:"365"===e,onCheck:t}),s().createElement("label",{htmlFor:"inactive-subscribers-12-months"},(0,w.t)("after12months"))))))}function at(){const[e,t]=Ce("analytics","enabled"),[,n]=Ce("3rd_party_libs","enabled");return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("shareDataTitle"),description:s().createElement(s().Fragment,null,(0,w.t)("shareDataDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/130-sharing-your-data-with-us","data-beacon-article":"57ce0aaac6979108399a0454",rel:"noopener noreferrer",target:"_blank"},(0,w.t)("readMore"))),htmlFor:""}),s().createElement(ke,null,s().createElement(We.Z,{id:"share-data-enabled",value:"1",checked:"1"===e,onCheck:()=>{t("1"),n("1")},automationId:"analytics-yes"}),s().createElement("label",{htmlFor:"share-data-enabled"},(0,w.t)("yes")),s().createElement("span",{className:"mailpoet-gap"}),s().createElement(We.Z,{id:"share-data-disabled",value:"",checked:""===e,onCheck:t,automationId:"analytics-no"}),s().createElement("label",{htmlFor:"share-data-disabled"},(0,w.t)("no"))))}He.propTypes={name:ze().oneOf(["mailpoet_archive","mailpoet_subscribers_count"]).isRequired,title:ze().string.isRequired,description:ze().string.isRequired};const rt=()=>{const[e,t]=Ce("3rd_party_libs","enabled"),[,n]=Ce("analytics","enabled");return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("libs3rdPartyTitle"),description:s().createElement(s().Fragment,null,(0,w.t)("libs3rdPartyDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/338-what-3rd-party-libraries-we-use","data-beacon-article":"5f7c7dd94cedfd0017dcece8",rel:"noopener noreferrer",target:"_blank"},(0,w.t)("readMore"))),htmlFor:""}),s().createElement(ke,null,s().createElement(We.Z,{id:"libs-3rd-party-enabled",value:"1",checked:"1"===e,onCheck:t}),s().createElement("label",{htmlFor:"libs-3rd-party-enabled"},(0,w.t)("yes")),s().createElement("span",{className:"mailpoet-gap"}),s().createElement(We.Z,{id:"libs-3rd-party-disabled",value:"",checked:""===e,onCheck:()=>{t(""),n("")}}),s().createElement("label",{htmlFor:"libs-3rd-party-disabled"},(0,w.t)("no"))))};function lt(){const[e,t]=Ce("captcha","type"),[n,a]=Ce("captcha","recaptcha_site_token"),[r,l]=Ce("captcha","recaptcha_secret_token"),i=Te("isBuiltInCaptchaSupported")(),o=Ne("setErrorFlag"),c="recaptcha"===e&&""===n.trim(),m="recaptcha"===e&&""===r.trim();return s().useEffect((()=>{o(c||m)}),[m,c,o]),s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("captchaTitle"),description:s().createElement(s().Fragment,null,(0,w.t)("captchaDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://www.google.com/recaptcha/admin",rel:"noopener noreferrer",target:"_blank"},(0,w.t)("signupForCaptchaKey"))),htmlFor:""}),s().createElement(ke,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"built-in-captcha",disabled:!i,value:"built-in",checked:"built-in"===e,onCheck:t}),s().createElement("label",{htmlFor:"built-in-captcha"},(0,w.t)("builtInCaptcha")," ",!i&&(0,w.t)("disbaledBecauseExtensionMissing"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"google-captcha",value:"recaptcha",checked:"recaptcha"===e,onCheck:t}),s().createElement("label",{htmlFor:"google-captcha"},(0,w.t)("googleReCaptcha"))),"recaptcha"===e&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ve.Z,{dimension:"small",type:"text",value:n,onChange:(0,w.z2)(a),placeholder:(0,w.t)("yourReCaptchaKey")}),c&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,w.t)("fillReCaptchaKeys")),s().createElement("br",null),s().createElement(Ve.Z,{dimension:"small",type:"text",value:r,onChange:(0,w.z2)(l),placeholder:(0,w.t)("yourReCaptchaSecret")}),m&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,w.t)("fillReCaptchaKeys"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(We.Z,{id:"no-captcha",value:"",checked:""===e,onCheck:t}),s().createElement("label",{htmlFor:"no-captcha"},(0,w.t)("disable")))))}function it(){const e=Ne("reinstall"),{notices:t}=s().useContext(m.k);return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("reinstallTitle"),description:(0,w.t)("reinstallDescription"),htmlFor:""}),s().createElement(ke,null,s().createElement(Ie.Z,{type:"button",onClick:async()=>{if(window.confirm((0,w.t)("reinstallConfirmation"))){const n=await e();"SAVE_FAILED"===n.type?t.error(n.error.map((e=>s().createElement("p",null,e))),{scroll:!0}):window.location.href="admin.php?page=mailpoet-newsletters"}},automationId:"reinstall-button",variant:"destructive"},(0,w.t)("reinstallNow"))))}function st(){const e=Ne("recalculateSubscribersScore"),{notices:t}=s().useContext(m.k);return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("recalculateSubscribersScoreTitle"),description:(0,w.t)("recalculateSubscribersScoreDescription"),htmlFor:""}),s().createElement(ke,null,s().createElement(Ie.Z,{type:"button",onClick:async()=>{await e(),t.info(s().createElement("p",null,(0,w.t)("recalculateSubscribersScoreNotice")),{scroll:!0})},variant:"secondary",dimension:"small"},(0,w.t)("recalculateSubscribersScoreNow"))))}function ot(){const[e,t]=Ce("logging");return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("loggingTitle"),description:s().createElement(s().Fragment,null,(0,w.t)("loggingDescription")," ",s().createElement("a",{href:"?page=mailpoet-logs",className:"mailpoet-link"},(0,w.t)("loggingDescriptionLink"))),htmlFor:"logging-level"}),s().createElement(ke,null,s().createElement(Pe.Z,{id:"logging-level",value:e,onChange:(0,w.z2)(t),automationId:"logging-select-box",isMinWidth:!0,dimension:"small"},s().createElement("option",{value:"everything","data-automation-id":"log-everything"},(0,w.t)("everythingLogOption")),s().createElement("option",{value:"errors","data-automation-id":"log-errors"},(0,w.t)("errorsLogOption")),s().createElement("option",{value:"nothing","data-automation-id":"log-nothing"},(0,w.t)("nothingLogOption")))))}function ct(){const[e,t]=Ce("bounce","address");return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("bounceEmail"),description:s().createElement(s().Fragment,null,(0,w.t)("yourBouncedEmails")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/180-how-bounce-management-works-in-mailpoet-3","data-beacon-article":"58a5a7502c7d3a576d353c78",rel:"noopener noreferrer",target:"_blank"},(0,w.t)("readMore"))),htmlFor:"bounce-address"}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",type:"text",id:"bounce-address",placeholder:"bounce@mydomain.com","data-automation-id":"bounce-address-field",value:e,onChange:(0,w.z2)((0,w.pz)(t))})))}function mt(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(ct,null),s().createElement(Xe,null),s().createElement(Qe,null),s().createElement(et,null),s().createElement(tt,null),s().createElement(st,null),s().createElement(nt,null),s().createElement(at,null),s().createElement(rt,null),s().createElement(lt,null),s().createElement(it,null),s().createElement(ot,null),s().createElement(Le,null))}var ut=n(13651);const pt=()=>s().createElement("div",{className:"mailpoet_success_item mailpoet_success_item mailpoet_success"},p.Z.I18n.t("premiumTabKeyValidMessage")),dt=()=>s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},p.Z.I18n.t("premiumTabKeyNotValidMessage"));function Et(){const{isKeyValid:e}=Te("getKeyActivationState")();return e?s().createElement(pt,null):s().createElement(dt,null)}const gt=()=>s().createElement("div",{className:"mailpoet_success_item mailpoet_success mailpoet_mss_key_valid"},p.Z.I18n.t("premiumTabMssActiveMessage")),_t=({message:e})=>s().createElement("div",{className:"mailpoet_error"},e||p.Z.I18n.t("premiumTabMssKeyNotValidMessage"));_t.propTypes={message:ze().string},_t.defaultProps={message:""};const bt=({activationCallback:e})=>s().createElement("div",{className:"mailpoet_error"},p.Z.I18n.t("premiumTabMssNotActiveMessage")," ",s().createElement("button",{type:"button",className:"mailpoet-button button button-primary button-small",onClick:e},p.Z.I18n.t("premiumTabMssActivateMessage")));function ht(e){const{mssStatus:t}=Te("getKeyActivationState")();switch(t){case E.VALID_MSS_ACTIVE:return s().createElement(gt,null);case E.VALID_MSS_NOT_ACTIVE:return s().createElement(bt,{activationCallback:e.activationCallback});case E.INVALID:return s().createElement(_t,{message:e.keyMessage});default:return null}}bt.propTypes={activationCallback:ze().func.isRequired},ht.propTypes={keyMessage:ze().string,activationCallback:ze().func.isRequired},ht.defaultProps={keyMessage:""};const ft=()=>s().createElement("div",{className:"mailpoet_success_item mailpoet_success"},p.Z.I18n.t("premiumTabPremiumActiveMessage")),vt=e=>s().createElement(s().Fragment,null,s().createElement("div",{className:"mailpoet_error mailpoet_install_premium_message"},p.Z.I18n.t("premiumTabPremiumNotActivatedMessage")),e.url&&s().createElement(Ie.Z,{href:e.url},p.Z.I18n.t("premiumTabPremiumActivateMessage")));vt.propTypes={url:ze().string};const yt=e=>s().createElement(s().Fragment,null,s().createElement("div",{className:"mailpoet_error mailpoet_install_premium_message"},p.Z.I18n.t("premiumTabPremiumNotInstalledMessage")),e.url&&s().createElement(Ie.Z,{href:e.url},p.Z.I18n.t("premiumTabPremiumDownloadMessage")));yt.propTypes={url:ze().string};const kt=({message:e})=>s().createElement("div",{className:"mailpoet_error"},e||p.Z.I18n.t("premiumTabPremiumKeyNotValidMessage"));function It(e){const{premiumStatus:t,downloadUrl:n,activationUrl:a}=Te("getKeyActivationState")();switch(t){case d.VALID_PREMIUM_PLUGIN_ACTIVE:return s().createElement(s().Fragment,null,s().createElement(ft,null));case d.VALID_PREMIUM_PLUGIN_NOT_INSTALLED:return s().createElement(s().Fragment,null,s().createElement(yt,{url:n}));case d.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:return s().createElement(s().Fragment,null,s().createElement(vt,{url:a}));case d.INVALID:return s().createElement(s().Fragment,null,s().createElement(kt,{message:e.keyMessage}));default:return null}}function St(){return s().createElement(s().Fragment,null,s().createElement("div",{className:"mailpoet_error_item mailpoet_error"},p.Z.I18n.t("premiumTabKeyCannotValidate"),s().createElement("ul",{className:"disc-inside-list"},s().createElement("li",null,p.Z.I18n.t("premiumTabKeyCannotValidateLocalhost")),s().createElement("li",null,p.Z.I18n.t("premiumTabKeyCannotValidateBlockingHost")),s().createElement("li",null,p.Z.I18n.t("premiumTabKeyCannotValidateIntranet"))),s().createElement("p",null,s().createElement("a",{href:"https://kb.mailpoet.com/article/319-known-errors-when-validating-a-mailpoet-key",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"5ef1da9d2c7d3a10cba966c5",className:"mailpoet_error"},p.Z.I18n.t("learnMore")))))}function Nt(){const{notices:e}=(0,i.useContext)(m.k),t=Te("getKeyActivationState")(),n=Ne("updateKeyActivationState"),a=Ne("verifyMssKey"),r=Ne("verifyPremiumKey"),l=Ne("sendCongratulatoryMssEmail"),[o,c]=Ce("sender","address"),[u,d]=Ce("authorized_emails_addresses_check"),[g]=Ce("mta","mailpoet_api_key_state","data"),_=t.fromAddressModalCanBeShown&&t.mssStatus===E.VALID_MSS_ACTIVE&&(!o||u),b=!1===t.inProgress&&t.mssStatus===E.VALID_MSS_ACTIVE&&g&&!1===g.is_approved;return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(ye,{htmlFor:"mailpoet_premium_key",title:(0,w.t)("premiumTabActivationKeyLabel"),description:(0,w.t)("premiumTabDescription")}),s().createElement(ke,null,s().createElement(Ve.Z,{type:"password",id:"mailpoet_premium_key",name:"premium[premium_key]",value:t.key||"",onChange:e=>n({mssStatus:null,premiumStatus:null,premiumInstallationStatus:null,key:e.target.value.trim()||null})}),s().createElement(Ie.Z,{type:"button",onClick:async()=>{t.key?(await n({mssStatus:null,premiumStatus:null,premiumInstallationStatus:null}),p.Z.Modal.loading(!0),n({inProgress:!0}),await a(t.key),await l(),await r(t.key),n({inProgress:!1}),p.Z.Modal.loading(!1),n({fromAddressModalCanBeShown:!0})):e.error(s().createElement("p",null,(0,w.t)("premiumTabNoKeyNotice")),{scroll:!0})}},(0,w.t)("premiumTabVerifyButton")),null!==t.isKeyValid&&(503===t.code?s().createElement("div",{className:"key-activation-messages"},s().createElement(St,null)):s().createElement("div",{className:"key-activation-messages"},s().createElement(Et,null),null!==t.mssStatus&&s().createElement(ht,{keyMessage:t.mssMessage,activationCallback:async()=>{await a(t.key),l(),n({fromAddressModalCanBeShown:!0})}}),t.congratulatoryMssEmailSentTo&&s().createElement("div",{className:"mailpoet_success_item mailpoet_success"},(0,w.t)("premiumTabCongratulatoryMssEmailSent").replace("[email_address]",t.congratulatoryMssEmailSentTo)),null!==t.premiumStatus&&s().createElement(It,{keyMessage:t.premiumMessage}),b&&s().createElement("div",{className:"mailpoet_success"},s().createElement("div",{className:"pending_approval_heading"},(0,w.t)("premiumTabPendingApprovalHeading")),s().createElement("div",null,(0,w.t)("premiumTabPendingApprovalMessage"))),!t.isKeyValid&&s().createElement("p",null,s().createElement("a",{href:"https://kb.mailpoet.com/article/319-known-errors-when-validating-a-mailpoet-key",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"5ef1da9d2c7d3a10cba966c5",className:"mailpoet_error"},p.Z.I18n.t("learnMore")))))),_&&s().createElement(ut.Z,{onRequestClose:()=>{n({fromAddressModalCanBeShown:!1}),l()},setAuthorizedAddress:async e=>{await c(e),await d(null)}}))}kt.propTypes={message:ze().string},kt.defaultProps={message:""},It.propTypes={keyMessage:ze().string},It.defaultProps={keyMessage:""};var At=n(5977),Tt=n(73727);function Ct(){const e=(0,At.useHistory)(),t=Te("isMssActive")(),[n]=Ce("mta","mailpoet_api_key"),{mssStatus:a,premiumStatus:r}=Te("getKeyActivationState")(),l=null!==a&&a!==E.INVALID,i=null!==r&&r!==d.INVALID,o=window.mailpoet_free_plan_url,c=Ne("setSetting"),m=Ne("saveSettings");return s().createElement("ul",{className:"mailpoet-sending-methods"},s().createElement("li",null,s().createElement("label",{className:"mailpoet-sending-method mailpoet-form-checkbox"},s().createElement("input",{type:"radio",checked:t,onChange:async a=>{a.preventDefault(),t||l||e.push("/premium"),!t&&l&&await(async()=>(await c(["mta_group"],"mailpoet"),await c(["mta","method"],"MailPoet"),await c(["mta","mailpoet_api_key"],n),await c(["signup_confirmation","enabled"],"1"),m()))()}}),s().createElement("span",{className:"mailpoet-form-radio-control"}),s().createElement("h4",{className:"mailpoet-h4"},(0,w.t)("mssTitle")),s().createElement("p",null,t?(0,w.t)("youreSendingWithMss"):(0,w.t)("solveSendingProblems")),s().createElement("ul",{className:"mailpoet-sending-method-benefits mailpoet_success"},s().createElement("li",{className:"mailpoet_success_item"},(0,w.t)("mssBenefit1")),s().createElement("li",{className:"mailpoet_success_item"},(0,w.t)("mssBenefit2")),s().createElement("li",{className:"mailpoet_success_item"},(0,w.t)("mssBenefit3")),s().createElement("li",{className:"mailpoet_success_item"},(0,w.t)("mssBenefit4")),s().createElement("li",{className:"mailpoet_success_item"},(0,w.t)("mssBenefit5"))),!l&&!i&&s().createElement("div",{className:"mailpoet-sending-method-actions"},s().createElement("a",{className:"mailpoet-button button-primary",href:o,rel:"noopener noreferrer",target:"_blank"},(0,w.t)("freeUpto")),s().createElement("span",null," ",(0,w.t)("or")," "),Me()((0,w.t)("enterYourKey"),/\[link\](.*?)\[\/link\]/g,((e,t)=>s().createElement(Tt.rU,{key:t,to:"/premium",className:"mailpoet-link"},e)))),!l&&i&&s().createElement("div",{className:"mailpoet-sending-method-actions"},s().createElement("i",null,(0,w.t)("invalidKeyForMss"))," ",s().createElement("a",{className:"mailpoet-button button-primary",href:"https://account.mailpoet.com/",rel:"noopener noreferrer",target:"_blank"},(0,w.t)("getPlan"))))),s().createElement("li",null,s().createElement("label",{className:"mailpoet-sending-method mailpoet-form-checkbox"},s().createElement("input",{type:"radio",checked:!t,onChange:t=>{t.preventDefault(),e.push("/mta/other")}}),s().createElement("span",{className:"mailpoet-form-radio-control"}),s().createElement("h4",{className:"mailpoet-h4"},(0,w.t)("otherTitle")),s().createElement("p",null,(0,w.t)("sendViaHost")," ",s().createElement("strong",null,(0,w.t)("notRecommended"))," ",(0,w.t)("orViaThirdParty")),s().createElement("div",{className:"mailpoet-sending-method-actions"},s().createElement(Tt.rU,{to:"/mta/other",className:"mailpoet-link"},(0,w.t)("configure"))))))}function wt(){const[e,t]=Ce("smtp_provider"),[,n]=Ce("mta_group"),[,a]=Ce("mta","method");return s().useEffect((()=>{switch(e){case"server":n("website"),a("PHPMail");break;case"manual":n("smtp"),a("SMTP");break;case"AmazonSES":n("smtp"),a("AmazonSES");break;case"SendGrid":n("smtp"),a("SendGrid");break;default:a("PHPMail")}}),[e,n,a]),s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("method"),htmlFor:"mailpoet_smtp_method"}),s().createElement(ke,null,s().createElement(Pe.Z,{id:"mailpoet_smtp_method",value:e,onChange:(0,w.z2)(t),isMinWidth:!0,dimension:"small"},s().createElement("option",{value:"server"},(0,w.t)("hostOption")),s().createElement("option",{value:"manual"},(0,w.t)("smtpOption")),s().createElement("optgroup",{label:(0,w.t)("selectProvider")},s().createElement("option",{value:"AmazonSES"},"Amazon SES"),s().createElement("option",{value:"SendGrid"},"SendGrid")))))}function Mt(){return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("spfTitle"),description:(0,w.t)("spfDescription"),htmlFor:""}),s().createElement(ke,null,(0,w.t)("spfSetup")))}var Lt=n(83213),Ft=n(38287);function Dt(){const[e,t]=s().useState(window.mailpoet_current_user_email),[n]=Ce("mta"),{state:a,error:r}=Te("getTestEmailState")(),l=Ne("sendTestEmail");return s().createElement(s().Fragment,null,a===_.SENDING&&s().createElement(be.Z,null),a===_.SUCCESS&&s().createElement(Ft.Z,{type:"success",scroll:!0},s().createElement("p",null,(0,w.t)("emailSent"))),a===_.FAILURE&&s().createElement(Ft.Z,{type:"error",scroll:!0},s().createElement("p",null,r.map((e=>s().createElement("p",{key:e},e))))),s().createElement(ye,{title:(0,w.t)("testSending"),htmlFor:"mailpoet_mta_test_email"}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",type:"text",id:"mailpoet_mta_test_email",value:e,onChange:(0,w.z2)(t)}),s().createElement(Ie.Z,{type:"button",dimension:"small",variant:"secondary",onClick:()=>l(e,n)},(0,w.t)("sendTestEmail")),s().createElement(Lt.default,{tooltipId:"tooltip-settings-test",className:"mailpoet_tooltip_icon",tooltip:s().createElement("span",{style:{pointerEvents:"all"}},Me()((0,w.t)("testEmailTooltip"),/\[link\](.*?)\[\/link\]/g,((e,t)=>s().createElement("a",{className:"mailpoet-link",key:t,target:"_blank",rel:"noopener noreferrer","data-beacon-article":"580846f09033604df5166ed1",href:"https://kb.mailpoet.com/article/146-my-newsletters-are-not-being-received"},e))))})))}function Pt(){const e=Ne("saveSettings"),t=Ne("loadSettings"),n=(0,At.useHistory)();return s().createElement("div",{className:"mailpoet-settings-save"},s().createElement(Ie.Z,{type:"button",onClick:async()=>{await e(),n.push("/mta")}},(0,w.t)("activate")),s().createElement(Ie.Z,{onClick:async()=>{p.Z.Modal.loading(!0),await t(),n.push("/mta"),p.Z.Modal.loading(!1)},variant:"tertiary"},(0,w.t)("orCancel")))}function Zt({recommendedEmails:e,recommendedInterval:t}){const[n,a]=Ce("mailpoet_sending_frequency"),[r,l]=Ce("mta","frequency","emails"),[i,o]=Ce("mta","frequency","interval");s().useEffect((()=>{"auto"===n&&(l(`${e}`),o(`${t}`))}),[n,e,t,l,o]);const c=Math.floor(1440*parseInt(r,10)/parseInt(i,10)),m=Math.floor(c/86400*10)/10;return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("sendingFrequency"),htmlFor:"mailpoet_sending_frequency"}),s().createElement(ke,null,s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Pe.Z,{id:"mailpoet_sending_frequency",value:n,onChange:(0,w.z2)(a),dimension:"small"},s().createElement("option",{value:"auto"},(0,w.t)("recommendedTitle")),s().createElement("option",{value:"manual"},(0,w.t)("ownFrequency")))),"manual"===n&&s().createElement(s().Fragment,null,s().createElement("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered"},s().createElement(Ve.Z,{dimension:"small",id:"other_frequency_emails",type:"number",min:"1",max:"1000",value:r,onChange:(0,w.z2)(l)}),s().createElement("span",{className:"mailpoet-gap"}),s().createElement("span",null,(0,w.t)("emails"))),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Pe.Z,{id:"other_frequency_interval",value:i,onChange:(0,w.z2)(o),dimension:"small"},s().createElement("option",{value:"1"},"every minute"),s().createElement("option",{value:"2"},"every 2 minutes"),s().createElement("option",{value:"5"},"every 5 minutes (recommended)"),s().createElement("option",{value:"10"},"every 10 minutes"),s().createElement("option",{value:"15"},"every 15 minutes"),s().createElement("option",{value:"30"},"every 30 minutes")))),"auto"===n&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},(0,w.t)("xEmails").replace("%1$s",r)," ",function(e){const t=Math.floor(parseInt(e,10));return t>60?(0,w.t)("everyHours").replace("%1$d",""+t/60):60===t?(0,w.t)("everyHour"):t>1?(0,w.t)("everyMinutes").replace("%1$d",`${t}`):(0,w.t)("everyMinute")}(i),". "),s().createElement("div",{className:"mailpoet-settings-inputs-row"},Me()((0,w.t)("thatsXEmailsPerDay").replace("%1$s",c.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>s().createElement("strong",{key:t},e)))),m>1&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement("span",{className:"mailpoet_emails_per_second_warning"},Me()((0,w.t)("thatsXEmailsPerSecond").replace("%1$s",m.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>s().createElement("strong",{key:t},e))))),"manual"===n&&s().createElement("div",{className:"mailpoet-settings-inputs-row"},Me()((0,w.t)("frequencyWarning").replace("%1$s",m.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>s().createElement("strong",{key:t},e))))))}function Vt(){const[e,t]=Ce("web_host"),n=Te("getWebHosts")(),a=n[e];return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("yourHost"),htmlFor:"mailpoet_web_host"}),s().createElement(ke,null,s().createElement(Pe.Z,{id:"mailpoet_web_host",value:e,onChange:(0,w.z2)(t),isMinWidth:!0,dimension:"small"},Object.entries(n).map((([e,t])=>s().createElement("option",{key:e,value:e},t.name))))),s().createElement(Zt,{recommendedEmails:a.emails,recommendedInterval:a.interval}))}function Rt(){const[e,t]=Ce("mta","host"),[n,a]=Ce("mta","port"),[r,l]=Ce("mta","login"),[i,o]=Ce("mta","password"),[c,m]=Ce("mta","encryption"),[u,p]=Ce("mta","authentication");return s().createElement(s().Fragment,null,s().createElement(Zt,{recommendedEmails:100,recommendedInterval:5}),s().createElement(ye,{title:(0,w.t)("smtpHost"),description:(0,w.t)("smtpHostExample"),htmlFor:"mailpoet_smtp_host"}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",type:"text",id:"mailpoet_smtp_host",value:e,onChange:(0,w.z2)(t)})),s().createElement(ye,{title:(0,w.t)("smtpPort"),htmlFor:"mailpoet_smtp_port"}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",type:"text",id:"mailpoet_smtp_port",value:n,onChange:(0,w.z2)(a)})),s().createElement(ye,{title:(0,w.t)("login"),htmlFor:"mailpoet_smtp_login"}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",type:"text",id:"mailpoet_smtp_login",value:r,onChange:(0,w.z2)(l)})),s().createElement(ye,{title:(0,w.t)("password"),htmlFor:"mailpoet_smtp_password"}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",type:"password",id:"mailpoet_smtp_password",value:i,onChange:(0,w.z2)(o)})),s().createElement(ye,{title:(0,w.t)("secureConnectioon"),htmlFor:"mailpoet_smtp_encryption"}),s().createElement(ke,null,s().createElement(Pe.Z,{id:"mailpoet_smtp_encryption",value:c,onChange:(0,w.z2)(m),isMinWidth:!0,dimension:"small"},s().createElement("option",{value:""},(0,w.t)("no")),s().createElement("option",{value:"ssl"},"SSL"),s().createElement("option",{value:"tls"},"TLS"))),s().createElement(ye,{title:(0,w.t)("authentication"),description:(0,w.t)("authenticationDescription"),htmlFor:"mailpoet_smtp_authentication"}),s().createElement(ke,null,s().createElement(We.Z,{value:"1",checked:"1"===u,onCheck:p}),(0,w.t)("yes")," ",s().createElement(We.Z,{value:"-1",checked:"-1"===u,onCheck:p}),(0,w.t)("no")))}function Ut(){const[e,t]=Ce("mta","region"),[n,a]=Ce("mta","access_key"),[r,l]=Ce("mta","secret_key"),i=Te("getAmazonSesOptions")();return s().createElement(s().Fragment,null,s().createElement(Zt,{recommendedEmails:i.emails,recommendedInterval:i.interval}),s().createElement(ye,{title:(0,w.t)("region"),htmlFor:"mailpoet_amazon_ses_region"}),s().createElement(ke,null,s().createElement(Pe.Z,{id:"mailpoet_amazon_ses_region",value:e,onChange:(0,w.z2)(t),isMinWidth:!0,dimension:"small"},Object.entries(i.regions).map((([e,t])=>s().createElement("option",{key:t,value:t},e))))),s().createElement(ye,{title:(0,w.t)("accessKey"),htmlFor:"mailpoet_amazon_ses_access_key"}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",type:"text",value:n,className:"regular-text",onChange:(0,w.z2)(a),id:"mailpoet_amazon_ses_access_key"})),s().createElement(ye,{title:(0,w.t)("secretKey"),htmlFor:"mailpoet_amazon_ses_secret_key"}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",type:"text",value:r,className:"regular-text",onChange:(0,w.z2)(l),id:"mailpoet_amazon_ses_secret_key"})))}function Ot(){const[e,t]=Ce("mta","api_key"),n=Te("getSendGridOptions")();return s().createElement(s().Fragment,null,s().createElement(Zt,{recommendedEmails:n.emails,recommendedInterval:n.interval}),s().createElement(ye,{title:(0,w.t)("apiKey"),htmlFor:"mailpoet_sendgrid_api_key"}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",type:"text",value:e,onChange:(0,w.z2)(t),id:"mailpoet_sendgrid_api_key"})))}function zt(){const[e]=Ce("mta","method");return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(wt,null),"PHPMail"===e&&s().createElement(Vt,null),"SMTP"===e&&s().createElement(Rt,null),"AmazonSES"===e&&s().createElement(Ut,null),"SendGrid"===e&&s().createElement(Ot,null),s().createElement(Mt,null),s().createElement(Dt,null),s().createElement(Pt,null))}function Gt(){const{subPage:e}=(0,At.useParams)();return"other"===e?s().createElement(zt,null):s().createElement(Ct,null)}function Kt(){const e=Te("isMssActive")(),[t,n]=Ce("signup_confirmation","enabled"),a=e=>{"1"===e&&window.confirm((0,w.t)("subscribersNeedToActivateSub"))&&n("1"),""===e&&window.confirm((0,w.t)("newSubscribersAutoConfirmed"))&&n("")};return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("enableSignupConfTitle"),description:s().createElement(s().Fragment,null,(0,w.t)("enableSignupConfDescription")," ",s().createElement("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/128-why-you-should-use-signup-confirmation-double-opt-in","data-beacon-article":"57ce097f903360649f6e5700",rel:"noopener noreferrer",target:"_blank"},(0,w.t)("readAboutDoubleOptIn"))),htmlFor:"signup_confirmation-enabled"}),s().createElement(ke,null,e?s().createElement("p",null,(0,w.t)("signupConfirmationIsMandatory")):s().createElement(s().Fragment,null,s().createElement(We.Z,{id:"signup_confirmation-enabled",checked:"1"===t,value:"1",onCheck:a,automationId:"enable_signup_confirmation"}),(0,w.t)("yes")," ",s().createElement(We.Z,{checked:""===t,value:"",onCheck:a,automationId:"disable_signup_confirmation"}),(0,w.t)("no"))))}function xt(){const[e]=Ce("signup_confirmation","enabled"),[t,n]=Ce("signup_confirmation","subject");return e?s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("emailSubject"),htmlFor:"signup_confirmation-subject"}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",type:"text",size:50,id:"signup_confirmation-subject","data-automation-id":"signup_confirmation_email_subject",value:t,onChange:(0,w.z2)(n)}))):null}Zt.propTypes={recommendedEmails:ze().number.isRequired,recommendedInterval:ze().number.isRequired};var qt=n(97972);function Bt(){const[e]=Ce("signup_confirmation","enabled"),[t,n]=Ce("signup_confirmation","body");if(!e)return null;const a=(0,w.t)("emailContentDescription").split("<br />").filter((e=>e));return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("emailContent"),description:a.map((e=>s().createElement("span",{key:e},e,s().createElement("br",null),s().createElement("br",null)))),htmlFor:"signup_confirmation-body"}),s().createElement(ke,null,s().createElement(qt.Z,{id:"signup_confirmation-body",cols:50,rows:15,"data-automation-id":"signup_confirmation_email_body",value:t,onChange:(0,w.z2)(n)})))}function Wt(){const[e]=Ce("signup_confirmation","enabled"),[t,n]=Ce("subscription","pages","confirmation");return e?s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("confirmationPage"),description:(0,w.t)("confirmationPageDescription"),htmlFor:"subscription-pages-confirmation"}),s().createElement(ke,null,s().createElement(Ze,{value:t,preview:"confirm",setValue:n,id:"subscription-pages-confirmation",automationId:"page_selection",linkAutomationId:"preview_page_link"}))):null}function $t(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(Kt,null),s().createElement(xt,null),s().createElement(Bt,null),s().createElement(Wt,null),s().createElement(Le,null))}function Ht(){const[e,t]=Ce("woocommerce","use_mailpoet_editor"),[n]=Ce("woocommerce","transactional_email_id"),a=Ne("openWoocommerceCustomizer");return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("wcCustomizerTitle"),description:(0,w.t)("wcCustomizerDescription"),htmlFor:"mailpoet_wc_customizer"}),s().createElement(ke,null,s().createElement(Ge.Z,{id:"mailpoet_wc_customizer",automationId:"mailpoet_wc_customizer",checked:"1"===e,onCheck:e=>t(e?"1":"")}),s().createElement("div",{className:"mailpoet-settings-inputs-row"},s().createElement(Ie.Z,{type:"button",onClick:()=>a(n),variant:"secondary",dimension:"small"},(0,w.t)("openTemplateEditor")))))}function jt(){const[e,t]=Ce("woocommerce","optin_on_checkout","enabled"),[n,a]=Ce("woocommerce","optin_on_checkout","segments"),[r,l]=Ce("woocommerce","optin_on_checkout","message"),i=Ne("setErrorFlag"),o=""===r.trim();return s().useEffect((()=>{i(o)}),[o,i]),s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("wcOptinTitle"),description:(0,w.t)("wcOptinDescription"),htmlFor:"mailpoet_wc_checkout_optin"}),s().createElement(ke,null,s().createElement(Ge.Z,{id:"mailpoet_wc_checkout_optin",automationId:"mailpoet_wc_checkout_optin",checked:"1"===e,onCheck:e=>t(e?"1":"")}),"1"===e&&s().createElement(s().Fragment,null,s().createElement("br",null),s().createElement("label",{htmlFor:"mailpoet_wc_checkout_optin_segments"},(0,w.t)("wcOptinSegmentsTitle"),s().createElement("br",null),s().createElement("span",null,(0,w.t)("leaveEmptyToSubscribeToWCCustomers"))),s().createElement("br",null),s().createElement(De,{id:"mailpoet_wc_checkout_optin_segments",value:n,setValue:a,placeholder:(0,w.t)("wcOptinSegmentsPlaceholder")}))),"1"===e&&s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("wcOptinMsgTitle"),description:(0,w.t)("wcOptinMsgDescription"),htmlFor:"mailpoet_wc_checkout_optin_message"}),s().createElement(ke,null,s().createElement(Ve.Z,{dimension:"small",type:"text",id:"mailpoet_wc_checkout_optin_message","data-automation-id":"mailpoet_wc_checkout_optin_message",value:r,onChange:(0,w.z2)(l),placeholder:(0,w.t)("wcOptinMsgPlaceholder")}),s().createElement("br",null),o&&s().createElement("span",{className:"mailpoet_error_item mailpoet_error"},(0,w.t)("wcOptinMsgCannotBeEmpty")))))}function Jt(){const[e,t]=Ce("mailpoet_subscribe_old_woocommerce_customers","enabled");return s().createElement(s().Fragment,null,s().createElement(ye,{title:(0,w.t)("subscribeOldWCTitle"),description:(0,w.t)("subscribeOldWCDescription"),htmlFor:"mailpoet_subscribe_old_wc_customers"}),s().createElement(ke,null,s().createElement(Ge.Z,{id:"mailpoet_subscribe_old_wc_customers",automationId:"mailpoet_subscribe_old_wc_customers",checked:"1"===e,onCheck:e=>t(e?"1":"")})))}function Yt(){return s().createElement("div",{className:"mailpoet-settings-grid"},s().createElement(Ht,null),s().createElement(jt,null),s().createElement(Jt,null),s().createElement(Le,null))}function Xt(){const e=Te("isSaving")(),t=Te("hasWooCommerce")();return s().createElement(s().Fragment,null,s().createElement(ve.D,null),e&&s().createElement(be.Z,null),s().createElement(_e.Z,null),s().createElement(he.Z,{activeKey:"basics",onSwitch:e=>(e=>{p.Z.trackEvent("User has clicked a tab in Settings",{"Tab ID":e})})(e)},s().createElement(fe.Z,{key:"basics",title:(0,w.t)("basicsTab"),automationId:"basic_settings_tab"},s().createElement(Ye,null)),s().createElement(fe.Z,{key:"signup",title:(0,w.t)("signupConfirmationTab"),automationId:"signup_settings_tab"},s().createElement($t,null)),s().createElement(fe.Z,{key:"mta",route:"mta/:subPage?",title:(0,w.t)("sendWithTab"),automationId:"send_with_settings_tab"},s().createElement(Gt,null)),t&&s().createElement(fe.Z,{key:"woocommerce",title:(0,w.t)("wooCommerceTab"),automationId:"woocommerce_settings_tab"},s().createElement(Yt,null)),s().createElement(fe.Z,{key:"advanced",title:(0,w.t)("advancedTab"),automationId:"settings-advanced-tab"},s().createElement(mt,null)),s().createElement(fe.Z,{key:"premium",title:(0,w.t)("keyActivationTab"),automationId:"activation_settings_tab"},s().createElement(Nt,null))))}const Qt=()=>s().createElement(m.k.Provider,{value:(0,m.S)(window)},s().createElement(Xt,null)),en=document.getElementById("settings_container");en&&((e=>{(0,u.R9)(ge,{reducer:de(Ee(e)),actions:a,selectors:r,controls:l,resolvers:{}})})(window),c().render(s().createElement(Qt,null),en))},65311:function(e){e.exports=jQuery}},function(e){e.O(0,[351],(function(){return 24773,e(e.s=24773)})),e.O()}]);